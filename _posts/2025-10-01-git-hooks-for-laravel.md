---
layout: post
title: "–ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è Laravel: –∫–∞–∫ —Å–¥–µ–ª–∞—Ç—å –ø—Ä–æ—Ü–µ—Å—Å —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –±—ã—Å—Ç—Ä—ã–º –∏ –Ω–∞–¥–µ–∂–Ω—ã–º"
date: 2025-10-01
categories: ["open source", "git-hooks", "laravel"]
---

–†–∞–∑—Ä–∞–±–æ—Ç–∫–∞ –Ω–∞ Laravel —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ–π, –µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—é –Ω–∞ –∫–∞–∂–¥–æ–º —ç—Ç–∞–ø–µ: –æ—Ç –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –æ–∫—Ä—É–∂–µ–Ω–∏—è –¥–æ –ø—Ä–æ–≤–µ—Ä–∫–∏ –∫–æ–¥–∞ –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è. –í —ç—Ç–æ–π —Å—Ç–∞—Ç—å–µ —è –ø–æ–∫–∞–∂—É, –∫–∞–∫ –ø–æ—Å—Ç—Ä–æ–∏—Ç—å –ø—Ä–æ—Ü–µ—Å—Å —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏, –∫–æ—Ç–æ—Ä—ã–π —Å–Ω–∏–∂–∞–µ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ä—É—á–Ω–æ–π —Ä–∞–±–æ—Ç—ã, –ø–æ–≤—ã—à–∞–µ—Ç –∫–∞—á–µ—Å—Ç–≤–æ –∫–æ–¥–∞ –∏ —É—Å–∫–æ—Ä—è–µ—Ç –≤—ã–ø—É—Å–∫ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–∞.

–ú–∞—Ç–µ—Ä–∏–∞–ª —Ä–∞—Å—Å—á–∏—Ç–∞–Ω –Ω–∞ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ —Å –æ–ø—ã—Ç–æ–º —Ä–∞–±–æ—Ç—ã —Å Laravel, –∫–æ—Ç–æ—Ä—ã–µ —Ö–æ—Ç—è—Ç –≤–Ω–µ–¥—Ä–∏—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–≤–µ—Ä–∫–∏, —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π –∞–Ω–∞–ª–∏–∑, –µ–¥–∏–Ω—ã–π —Å—Ç–∏–ª—å –∫–æ–¥–∞ –∏ –≥–æ—Ç–æ–≤—É—é —Å–±–æ—Ä–∫—É Docker Compose –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ —Å—Ç–∞—Ä—Ç–∞ –ø—Ä–æ–µ–∫—Ç–æ–≤. –Ø –ø–æ–¥–µ–ª—é—Å—å —Å–≤–æ–∏–º –æ–ø—ã—Ç–æ–º, –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–º–∏ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞–º–∏ –∏ –ø—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–º–∏ –ø—Ä–∏–º–µ—Ä–∞–º–∏.

## –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Docker compose
–õ—é–±–æ–π –ø—Ä–æ–µ–∫—Ç –Ω–∞ Laravel —É –º–µ–Ω—è –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å —Ç—â–∞—Ç–µ–ª—å–Ω–æ–π –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ Docker Compose. –≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç —Å—Ä–∞–∑—É –ø–æ–ª—É—á–∏—Ç—å –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ä–∞–±–æ—á–µ–µ –∏ –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏, —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞. –¢–∞–∫–æ–π –ø–æ–¥—Ö–æ–¥ –º–∏–Ω–∏–º–∏–∑–∏—Ä—É–µ—Ç –∫–æ–Ω—Ñ–ª–∏–∫—Ç—ã –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π, —É—Å–∫–æ—Ä—è–µ—Ç —Å—Ç–∞—Ä—Ç –ø—Ä–æ–µ–∫—Ç–∞ –∏ –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç —Å—Ç–∞–±–∏–ª—å–Ω—É—é —Ä–∞–±–æ—Ç—É –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤.

–í –º–æ–µ–π —Å–±–æ—Ä–∫–µ –æ–±—ã—á–Ω–æ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è —Å–ª–µ–¥—É—é—â–∏–µ —Å–µ—Ä–≤–∏—Å—ã:

| –°–µ—Ä–≤–∏—Å | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ |
|---|---|
| php-fpm | –û–±—Ä–∞–±–æ—Ç–∫–∞ PHP-–∑–∞–ø—Ä–æ—Å–æ–≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è |
| PostgreSQL | –†–µ–ª—è—Ü–∏–æ–Ω–Ω–∞—è –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö |
| Grafana | –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è –º–µ—Ç—Ä–∏–∫ –∏ –ª–æ–≥–æ–≤ |
| Loki | –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ |
| pgAdmin | –í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è PostgreSQL |
| Redis | –ö—ç—à –∏ –æ—á–µ—Ä–µ–¥–∏ Laravel |
| RedisInsight | –í–µ–±-–º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ Redis |
| Queue | –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ñ–æ–Ω–æ–≤—ã—Ö –∑–∞–¥–∞—á —á–µ—Ä–µ–∑ php artisan queue:work |

–ö–∞–∂–¥—ã–π —Å–µ—Ä–≤–∏—Å —Ä–∞–∑–≤–æ—Ä–∞—á–∏–≤–∞–µ—Ç—Å—è –≤ –æ—Ç–¥–µ–ª—å–Ω–æ–º –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ, —á—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç:
* –≥–∏–±–∫–æ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞—Ç—å –æ–∫—Ä—É–∂–µ–Ω–∏–µ;
* —É–ø—Ä–∞–≤–ª—è—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è–º–∏ –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ –¥—Ä—É–≥ –æ—Ç –¥—Ä—É–≥–∞;
* –æ–±–Ω–æ–≤–ª—è—Ç—å –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –±–µ–∑ –ø—Ä–æ—Å—Ç–æ—è –æ—Å—Ç–∞–ª—å–Ω—ã—Ö —Å–µ—Ä–≤–∏—Å–æ–≤.

–¢–∞–∫–æ–π –ø–æ–¥—Ö–æ–¥ –¥–µ–ª–∞–µ—Ç —Ä–∞–∑—Ä–∞–±–æ—Ç–∫—É, –ø–æ–¥–¥–µ—Ä–∂–∫—É –∏ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞ —É–¥–æ–±–Ω—ã–º–∏ –∏ –±–µ–∑–æ–ø–∞—Å–Ω—ã–º–∏.

| **–°–æ–≤–µ—Ç:** –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ —Å—Ç–∞—Ä—Ç–∞ –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≥–æ—Ç–æ–≤—ã–π docker-compose.yml, –∫–æ—Ç–æ—Ä—ã–π —Å—Ä–∞–∑—É –ø–æ–¥–Ω–∏–º–∞–µ—Ç –≤—Å–µ —Å–µ—Ä–≤–∏—Å—ã –≤ –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω–æ–º –æ–∫—Ä—É–∂–µ–Ω–∏–∏ –∏ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç –±–∞–∑–æ–≤—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –¥–ª—è Laravel.

```yaml
services:
    app:
    build: .
    container_name: pet
    user: root
    depends_on:
        - pgdb
        - redis
        - loki
    env_file:
      - .env
    working_dir: /var/www/
    volumes:
      - .:/var/www
    networks:
      - pet
    dns:
        - 8.8.8.8
        - 1.1.1.1

    pgdb:
        container_name: pgdb
        image: postgres
        tty: true
        restart: always
        environment:
            - POSTGRES_DB=${DB_DATABASE}
            - POSTGRES_USER=${DB_USERNAME}
            - POSTGRES_PASSWORD=${DB_PASSWORD}
        ports:
            - ${PGDB_PORT}
        volumes:
            - ./docker/postgres:/var/lib/postgresql/data
        networks:
            - pet

    nginx:
        image: nginx:latest
        container_name: nginx
        restart: unless-stopped
        ports:
            - ${NGINX_PORT}
            - "443:443"
        volumes:
            - .:/var/www
            - ./docker/nginx:/etc/nginx/conf.d
            - /etc/letsencrypt:/etc/letsencrypt:ro
        environment:
            - TZ=${SYSTEM_TIMEZONE}
        depends_on:
            - pgdb
            - app
            - pgadmin
        networks:
            - pet

    pgadmin:
        image: dpage/pgadmin4:latest
        restart: always
        depends_on:
            - pgdb
        environment:
            - PGADMIN_DEFAULT_EMAIL=${PGADMIN_EMAIL}
            - PGADMIN_DEFAULT_PASSWORD=${PGADMIN_PASSWORD}
        ports:
            - ${PGADMIN_PORT}
        networks:
            - pet

    redis:
        image: redis:latest
        container_name: redis
        restart: always
        ports:
            - ${REDIS_PORT}
        environment:
            - REDIS_PASSWORD=${REDIS_PASSWORD}
        command: ["redis-server", "--requirepass", "${REDIS_PASSWORD}"]
        networks:
            - pet

    redisinsight:
        image: redislabs/redisinsight:latest
        container_name: redisinsight
        ports:
            - ${REDISINSIGHT_PORT}
        volumes:
            - ./docker/redisinsight:/db
        restart: always
        networks:
            - pet

    grafana:
        image: grafana/grafana:latest
        container_name: grafana
        user: "472"
        ports:
            - ${GRAFANA_PORT}
        environment:
            - GF_SECURITY_ADMIN_USER=${GRAFANA_USER}
            - GF_SECURITY_ADMIN_PASSWORD=${GRAFANA_PASSWORD}
        volumes:
            - ./docker/grafana:/var/lib/grafana
        depends_on:
            - loki
        networks:
            - pet

    queue:
        build: .
        image: docker_template:latest
        container_name: laravel_queue
        restart: always
        depends_on:
            - app
            - redis
        env_file:
            - .env
        working_dir: /var/www
        volumes:
            - .:/var/www
        command: php artisan queue:work --sleep=3 --tries=3 --timeout=90
        networks:
            - pet
        dns:
            - 8.8.8.8
            - 1.1.1.1

    loki:
        image: grafana/loki:latest
        container_name: loki
        ports:
            - ${LOKI_PORT}
        networks:
            - pet

    volumes:
      pgdata:
    networks:
      pet:
        driver: bridge
```

–ü–æ–¥ –∫–∞–∂–¥—ã–π —Å–µ—Ä–≤–∏—Å —è —Ä–∞–∑–≤–æ—Ä–∞—á–∏–≤–∞—é –æ—Ç–¥–µ–ª—å–Ω—ã–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä, —á—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –≥–∏–±–∫–æ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞—Ç—å –æ–∫—Ä—É–∂–µ–Ω–∏–µ, —É–ø—Ä–∞–≤–ª—è—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è–º–∏ –∏ –æ–±–Ω–æ–≤–ª—è—Ç—å –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ –¥—Ä—É–≥ –æ—Ç –¥—Ä—É–≥–∞. –¢–∞–∫–æ–π –ø–æ–¥—Ö–æ–¥ –¥–µ–ª–∞–µ—Ç —Ä–∞–∑—Ä–∞–±–æ—Ç–∫—É –∏ –ø–æ–¥–¥–µ—Ä–∂–∫—É –ø—Ä–æ–µ–∫—Ç–∞ –±–æ–ª–µ–µ —É–¥–æ–±–Ω–æ–π –∏ –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ–π.

### –ü–æ–¥–¥–µ—Ä–∂–∫–∞ Code Style —Å Laravel Pint
–î–ª—è —Å–æ–±–ª—é–¥–µ–Ω–∏—è PSR-12 —Å—Ç–∞–Ω–¥–∞—Ä—Ç–æ–≤ –≤ –ø—Ä–æ–µ–∫—Ç–∞—Ö –Ω–∞ Laravel —è –∏—Å–ø–æ–ª—å–∑—É—é –ø–∞–∫–µ—Ç **laravel/pint**. –≠—Ç–æ—Ç –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –≤—ã–ø–æ–ª–Ω—è–µ—Ç —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π –∞–Ω–∞–ª–∏–∑ –∫–æ–¥–∞ –∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Ñ–æ—Ä–º–∞—Ç–∏—Ä—É–µ—Ç —Ñ–∞–π–ª—ã PHP –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–∏ —Å —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–º–∏ –ø—Ä–∞–≤–∏–ª–∞–º–∏.

Pint –∏–Ω—Ç–µ–≥—Ä–∏—Ä—É–µ—Ç—Å—è –≤ –ø—Ä–æ—Ü–µ—Å—Å —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –∏ –ø–æ–∑–≤–æ–ª—è–µ—Ç:
* –∑–∞–ø—É—Å–∫–∞—Ç—å –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø—Ä–∏ –∫–æ–º–º–∏—Ç–∞—Ö;
* –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏—Å–ø—Ä–∞–≤–ª—è—Ç—å –æ—à–∏–±–∫–∏ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è;
* —É—Å–∫–æ—Ä—è—Ç—å –ø—Ä–∏–≤–µ–¥–µ–Ω–∏–µ –∫–æ–¥–∞ –∫ –µ–¥–∏–Ω–æ–º—É —Å—Ç–∏–ª—é.

–¢–∞–∫–æ–π –ø–æ–¥—Ö–æ–¥ —Å–Ω–∏–∂–∞–µ—Ç –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å –ø–æ—è–≤–ª–µ–Ω–∏—è —Ä–∞–∑—Ä–æ–∑–Ω–µ–Ω–Ω–æ–≥–æ –∏–ª–∏ –Ω–µ–∞–∫–∫—É—Ä–∞—Ç–Ω–æ–≥–æ –∫–æ–¥–∞ –∏ —ç–∫–æ–Ω–æ–º–∏—Ç –≤—Ä–µ–º—è –Ω–∞ —Ä—É—á–Ω—ã–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è.

–ü—Ä–∏–º–µ—Ä –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ **pint.json** –¥–ª—è –ø—Ä–æ–µ–∫—Ç–∞:

```json
{
"preset": "psr12",
"exclude": [
"vendor",
"storage",
"node_modules",
"bootstrap/cache"
],
"rules": {
"array_syntax": {
"syntax": "short"
},
"binary_operator_spaces": {
"default": "single_space"
},
"braces": true,
"class_attributes_separation": {
"elements": {
"const": "one",
"method": "one",
"property": "one"
}
},
"no_unused_imports": true,
"ordered_imports": true,
"phpdoc_separation": true,
"phpdoc_align": true,
"single_quote": true,
"ternary_to_null_coalescing": true,
"trailing_comma_in_multiline": {
"after_heredoc": true
},
"types_spaces": {
"space": "none"
},
"phpdoc_no_empty_return": false,
"no_superfluous_phpdoc_tags": false,
"concat_space": {
"spacing": "one"
}
}
}
```

–≠—Ç–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ø–æ–∑–≤–æ–ª—è–µ—Ç:
* –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å —á–∏—Å—Ç–æ—Ç—É –∏ –µ–¥–∏–Ω—ã–π —Å—Ç–∏–ª—å –∫–æ–¥–∞;
* —Å—Ç–∞–Ω–¥–∞—Ä—Ç–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –º–∞—Å—Å–∏–≤–æ–≤, –æ–ø–µ—Ä–∞—Ç–æ—Ä–æ–≤, —Å–∫–æ–±–æ–∫, –∏–º–ø–æ—Ä—Ç–æ–≤ –∏ PHPDoc;
* –∏—Å–∫–ª—é—á–∞—Ç—å –ª–∏—à–Ω–∏–µ –∏–º–ø–æ—Ä—Ç—ã –∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤—ã—Ä–∞–≤–Ω–∏–≤–∞—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é.

| **–°–æ–≤–µ—Ç:** –∑–∞–ø—É—Å–∫ Pint –ø–µ—Ä–µ–¥ –∫–æ–º–º–∏—Ç–æ–º –ø–æ–º–æ–≥–∞–µ—Ç –≤—Å–µ–≥–¥–∞ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å –∫–æ–¥ –≤ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–º —Å—Ç–∏–ª–µ, –Ω–µ —Ç—Ä–∞—Ç—è –≤—Ä–µ–º—è –Ω–∞ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–æ—Å–ª–µ —Ä–µ–≤—å—é.

## –°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π –∞–Ω–∞–ª–∏–∑ –∫–æ–¥–∞ —Å PHPStan –∏ Larastan
–î–ª—è –≤—ã—è–≤–ª–µ–Ω–∏—è –æ—à–∏–±–æ–∫ –∏ –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã—Ö –±–∞–≥–æ–≤ –≤ –ø—Ä–æ–µ–∫—Ç–∞—Ö –Ω–∞ Laravel —è –∏—Å–ø–æ–ª—å–∑—É—é –∫–æ–º–±–∏–Ω–∞—Ü–∏—é phpstan/phpstan –∏ nunomaduro/larastan. 

–≠—Ç–∏ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –≤—ã–ø–æ–ª–Ω—è—é—Ç —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π –∞–Ω–∞–ª–∏–∑ –∫–æ–¥–∞ –∏ –ø–æ–º–æ–≥–∞—é—Ç –æ–±–Ω–∞—Ä—É–∂–∏–≤–∞—Ç—å:
* –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ç–∏–ø–æ–≤;
* –Ω–µ–¥–æ—Å—Ç–∞—é—â–∏–µ –ø—Ä–æ–≤–µ—Ä–∫–∏;
* –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–µ –æ—à–∏–±–∫–∏ –Ω–∞ —Ä–∞–Ω–Ω–µ–π —Å—Ç–∞–¥–∏–∏ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏.

–ü—Ä–∏–º–µ—Ä –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ **phpstan.neon** –¥–ª—è –ø—Ä–æ–µ–∫—Ç–∞:
```
parameters:
level: 6
paths:
- app
- routes
excludePaths:
- vendor
- storage
- bootstrap

    errorFormat: table
    checkMissingVarTagTypehint: false
    inferPrivatePropertyTypeFromConstructor: true

    ignoreErrors:
        - identifier: missingType.iterableValue
        - identifier: missingType.generics
        - '#referenced with incorrect case#'

includes:
- vendor/phpstan/phpstan/conf/bleedingEdge.neon
```

–û—Å–Ω–æ–≤–Ω—ã–µ –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è PHPStan + Larastan:
* –æ—à–∏–±–∫–∏ –≤—ã—è–≤–ª—è—é—Ç—Å—è –µ—â—ë –¥–æ –∑–∞–ø—É—Å–∫–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è;
* –ø–æ–≤—ã—à–∞–µ—Ç—Å—è —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å –∏ –∫–∞—á–µ—Å—Ç–≤–æ –∫–æ–¥–∞;
* –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ –ø—Ä–æ—Ü–µ—Å—Å —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –º–∏–Ω–∏–º–∏–∑–∏—Ä—É–µ—Ç —Ä–∏—Å–∫ –ø–æ—è–≤–ª–µ–Ω–∏—è –±–∞–≥–æ–≤ –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ.

## –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å Git Hooks –∏ Shell-—Å–∫—Ä–∏–ø—Ç–∞–º–∏
–î–ª—è –ø–æ–¥–¥–µ—Ä–∂–∞–Ω–∏—è –∫–∞—á–µ—Å—Ç–≤–∞ –∫–æ–¥–∞ —è –∏—Å–ø–æ–ª—å–∑—É—é Git Hooks, –∫–æ—Ç–æ—Ä—ã–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–æ–≤–µ—Ä—è—é—Ç –∫–æ–¥ –ø–µ—Ä–µ–¥ –∫–æ–º–º–∏—Ç–æ–º –∏ –ø—É—à–µ–º. –í—Å–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –≤—ã–Ω–µ—Å–µ–Ω—ã –≤ –æ—Ç–¥–µ–ª—å–Ω—ã–µ shell-—Å–∫—Ä–∏–ø—Ç—ã, —á—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –≥–∏–±–∫–æ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞—Ç—å –∏—Ö –¥–ª—è —Ä–∞–∑–Ω—ã—Ö –ø—Ä–æ–µ–∫—Ç–æ–≤.

–û—Å–Ω–æ–≤–Ω—ã–µ –ø–æ–¥—Ö–æ–¥—ã:

1. Pre-commit: –ø—Ä–æ–≤–µ—Ä–∫–∞ –∏–∑–º–µ–Ω—ë–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤
- –ü—Ä–æ–≤–µ—Ä—è—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –Ω–æ–≤—ã–µ –∏–ª–∏ –∏–∑–º–µ–Ω—ë–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã, —á—Ç–æ —É—Å–∫–æ—Ä—è–µ—Ç –ø—Ä–æ—Ü–µ—Å—Å;
- –°–∫—Ä–∏–ø—Ç—ã –∑–∞–ø—É—Å–∫–∞—é—Ç Pint –∏ PHPStan, –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏—Å–ø—Ä–∞–≤–ª—è—é—Ç —Å—Ç–∏–ª—å –∏ –≤—ã—è–≤–ª—è—é—Ç –æ—à–∏–±–∫–∏;
- –ï—Å–ª–∏ –ø—Ä–æ–±–ª–µ–º –Ω–µ—Ç, –∫–æ–º–º–∏—Ç –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç—Å—è –±–µ–∑ –∑–∞–¥–µ—Ä–∂–µ–∫.

2. –ü–æ—Å—Ç–µ–ø–µ–Ω–Ω–æ–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ä—ã—Ö –æ—à–∏–±–æ–∫
- –î–ª—è —Å—Ç–∞—Ä—ã—Ö –ø—Ä–æ–µ–∫—Ç–æ–≤ —Å–∫—Ä–∏–ø—Ç—ã –ø—Ä–æ–≤–µ—Ä—è—é—Ç, —á—Ç–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ—à–∏–±–æ–∫ –≤ —Ñ–∞–π–ª–µ —É–º–µ–Ω—å—à–∏–ª–æ—Å—å —Ö–æ—Ç—è –±—ã –Ω–∞ 1‚Äì2 –ø–æ —Å—Ä–∞–≤–Ω–µ–Ω–∏—é —Å –ø—Ä–µ–¥—ã–¥—É—â–∏–º –∫–æ–º–º–∏—Ç–æ–º;
- –¢–∞–∫–æ–π –ø–æ–¥—Ö–æ–¥ –ø–æ–∑–≤–æ–ª—è–µ—Ç –≤–Ω–µ–¥—Ä—è—Ç—å –ø—Ä–æ–≤–µ—Ä–∫–∏ –±–µ–∑ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏.

3. –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–ª–∏—á–∏—è —Ç–µ—Å—Ç–æ–≤ –¥–ª—è –∫–ª–∞—Å—Å–æ–≤
4. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã Docker-—Å–±–æ—Ä–∫–∏
   
| –°–æ–≤–µ—Ç: –∏–Ω—Ç–µ–≥—Ä–∏—Ä—É–π—Ç–µ —ç—Ç–∏ —Å–∫—Ä–∏–ø—Ç—ã —Å —Å–∞–º–æ–≥–æ –Ω–∞—á–∞–ª–∞ –ø—Ä–æ–µ–∫—Ç–∞, —á—Ç–æ–±—ã –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è —Å—Ç–∞–ª–∞ —á–∞—Å—Ç—å—é –ø—Ä–∏–≤—ã—á–Ω–æ–≥–æ —Ä–∞–±–æ—á–µ–≥–æ –ø—Ä–æ—Ü–µ—Å—Å–∞.

–í—Å–µ –∞–∫—Ç—É–∞–ª—å–Ω—ã–µ —Å–∫—Ä–∏–ø—Ç—ã –∏ –ø—Ä–∏–º–µ—Ä—ã –º–æ–∂–Ω–æ –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏:

https://github.com/prog-time/git-hooks

## Shell —Å–∫—Ä–∏–ø—Ç –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å PHPStan
### –ü—Ä–∏–º–µ—Ä —Ä–∞–±–æ—Ç—ã PHPStan
```bash
#!/bin/bash

COMMAND="$1"  # commit –∏–ª–∏ push

# –ü–†–û–í–ï–†–Ø–ï–ú –ù–û–í–´–ï –§–ê–ô–õ–´
if [ "$COMMAND" = "commit" ]; then
# —Ç–æ–ª—å–∫–æ –Ω–æ–≤—ã–µ —Ñ–∞–π–ª—ã (—Å—Ç–∞—Ç—É—Å A = Added)
NEW_FILES=$(git diff --cached --name-only --diff-filter=A | grep '\.php$')

    if [ -z "$NEW_FILES" ]; then
        echo "‚úÖ –ù–µ—Ç –Ω–æ–≤—ã—Ö PHP-—Ñ–∞–π–ª–æ–≤. –ü—Ä–æ–ø—É—Å–∫–∞–µ–º –ø—Ä–æ–≤–µ—Ä–∫—É PHPStan –¥–ª—è –Ω–æ–≤—ã—Ö —Ñ–∞–π–ª–æ–≤."
    else
        echo "üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ PHPStan —Ç–æ–ª—å–∫–æ –¥–ª—è –Ω–æ–≤—ã—Ö —Ñ–∞–π–ª–æ–≤..."
        ./vendor/bin/phpstan analyse --no-progress --error-format=table $NEW_FILES
        if [ $? -ne 0 ]; then
          echo "‚ùå –ù–û–í–´–ï –§–ê–ô–õ–´! PHPStan –Ω–∞—à—ë–ª –æ—à–∏–±–∫–∏ —Ç–∏–ø–∏–∑–∞—Ü–∏–∏ (–û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û)"
          exit 1
        fi
    fi
fi
# ===============

# ===============
# –ü–†–û–í–ï–†–Ø–ï–ú –ò–ó–ú–ï–ù–ï–ù–ù–´–ï –§–ê–ô–õ–´

BASELINE_FILE=".phpstan-error-count.json"
BLOCK_COMMIT=0

if [ "$COMMAND" = "commit" ]; then
ALL_FILES=$(git diff --cached --name-only --diff-filter=ACM | grep '\.php$' || true)
elif [ "$COMMAND" = "push" ]; then
BRANCH=$(git rev-parse --abbrev-ref HEAD)
ALL_FILES=$(git diff --name-only origin/$BRANCH --diff-filter=ACM | grep '\.php$' || true)
else
echo "–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–∞—è –∫–æ–º–∞–Ω–¥–∞: $COMMAND"
exit 1
fi

if [ ! -f "$BASELINE_FILE" ]; then
echo "{}" > "$BASELINE_FILE"
fi

if [ -z "$ALL_FILES" ]; then
echo "‚úÖ [PHPStan] –ù–µ—Ç PHP-—Ñ–∞–π–ª–æ–≤ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏."
exit 0
fi

echo "üîç [PHPStan] –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ñ–∞–π–ª–æ–≤"

for FILE in $ALL_FILES; do
echo "üìÑ –ü—Ä–æ–≤–µ—Ä–∫–∞: $FILE"

    ERR_NEW=$(vendor/bin/phpstan analyse --error-format=raw --no-progress "$FILE" 2>/dev/null | grep -c '^')
    ERR_OLD=$(jq -r --arg file "$FILE" '.[$file] // empty' "$BASELINE_FILE")

    if [ -z "$ERR_OLD" ]; then
        echo "üÜï –§–∞–π–ª —Ä–∞–Ω–µ–µ –Ω–µ –ø—Ä–æ–≤–µ—Ä—è–ª—Å—è. –í –Ω—ë–º $ERR_NEW –æ—à–∏–±–æ–∫."
        ERR_OLD=$ERR_NEW
    fi

    TARGET=$((ERR_OLD - 1))
    [ "$TARGET" -lt 0 ] && TARGET=0

    if [ "$ERR_NEW" -le "$TARGET" ]; then
        echo "‚úÖ –£–ª—É—á—à–µ–Ω–æ: –±—ã–ª–æ $ERR_OLD, —Å—Ç–∞–ª–æ $ERR_NEW"
        jq --arg file "$FILE" --argjson errors "$ERR_NEW" '.[$file] = $errors' "$BASELINE_FILE" > "$BASELINE_FILE.tmp" && mv "$BASELINE_FILE.tmp" "$BASELINE_FILE"
    else
        echo "‚ùå –û—à–∏–±–æ–∫: $ERR_NEW (–Ω—É–∂–Ω–æ ‚â§ $TARGET)"
        vendor/bin/phpstan analyse --no-progress --error-format=table "$FILE"
        jq --arg file "$FILE" --argjson errors "$ERR_OLD" '.[$file] = $errors' "$BASELINE_FILE" > "$BASELINE_FILE.tmp" && mv "$BASELINE_FILE.tmp" "$BASELINE_FILE"
        BLOCK_COMMIT=1
    fi

    echo "------------------"
done

if [ "$BLOCK_COMMIT" -eq 1 ]; then
echo "‚õî –ö–æ–º–º–∏—Ç –æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω. –£–º–µ–Ω—å—à–∏ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ—à–∏–±–æ–∫ –ø–æ —Å—Ä–∞–≤–Ω–µ–Ω–∏—é —Å –ø—Ä–µ–¥—ã–¥—É—â–µ–π –≤–µ—Ä—Å–∏–µ–π."
exit 1
fi

echo "‚úÖ [PHPStan] –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞ —É—Å–ø–µ—à–Ω–æ."

# ===============

exit 0
–û–±—ä—è—Å–Ω–∏—Ç—å —Å
Shell —Å–∫—Ä–∏–ø—Ç –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å Pint
–ü—Ä–∏–º–µ—Ä —Ä–∞–±–æ—Ç—ã Pint
–ü—Ä–∏–º–µ—Ä —Ä–∞–±–æ—Ç—ã Pint
#!/bin/bash

COMMAND="$1"  # commit –∏–ª–∏ push

if [ "$COMMAND" = "commit" ]; then
ALL_FILES=$(git diff --cached --name-only --diff-filter=ACM | grep '\.php$' || true)
elif [ "$COMMAND" = "push" ]; then
BRANCH=$(git rev-parse --abbrev-ref HEAD)
ALL_FILES=$(git diff --name-only origin/$BRANCH --diff-filter=ACM | grep '\.php$' || true)
else
echo "–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–∞—è –∫–æ–º–∞–Ω–¥–∞: $COMMAND"
exit 1
fi


if [ -z "$ALL_FILES" ]; then
echo "‚úÖ [Pint] –ù–µ—Ç PHP-—Ñ–∞–π–ª–æ–≤ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏."
exit 0
fi

echo "üîç [Pint] –ü—Ä–æ–≤–µ—Ä–∫–∞ code style..."

vendor/bin/pint --test $ALL_FILES

RESULT=$?

if [ $RESULT -ne 0 ]; then
echo "‚ùå Pint –Ω–∞—à—ë–ª –æ—à–∏–±–∫–∏. –ê–≤—Ç–æ–∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ..."
vendor/bin/pint $ALL_FILES
echo "$ALL_FILES" | xargs git add
echo "‚úÖ [Pint] Code style –∏—Å–ø—Ä–∞–≤–ª–µ–Ω. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏ –∫–æ–º–º–∏—Ç."
exit 1
fi

echo "‚úÖ [Pint] –í—Å—ë —á–∏—Å—Ç–æ."
exit 0
```

## –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–ª–∏—á–∏—è —Ç–µ—Å—Ç–æ–≤ –¥–ª—è –∫–ª–∞—Å—Å–æ–≤
–î–ª—è –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è —ç—Ç–æ–π —Ü–µ–ª–∏ —è –∏—Å–ø–æ–ª—å–∑—É—é —Å–∫—Ä–∏–ø—Ç, –∫–æ—Ç–æ—Ä—ã–π –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –Ω–∞–ª–∏—á–∏–µ —Ç–µ—Å—Ç–æ–≤ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ PHP-–∫–ª–∞—Å—Å–∞, –¥–æ–±–∞–≤–ª–µ–Ω–Ω–æ–≥–æ –∏–ª–∏ –∏–∑–º–µ–Ω—ë–Ω–Ω–æ–≥–æ –≤ –∫–æ–º–º–∏—Ç–µ.

–°–∫—Ä–∏–ø—Ç –ø–æ–ª—É—á–∞–µ—Ç —Å–ø–∏—Å–æ–∫ –∏–∑–º–µ–Ω—ë–Ω–Ω—ã—Ö –∏ –¥–æ–±–∞–≤–ª–µ–Ω–Ω—ã—Ö PHP-—Ñ–∞–π–ª–æ–≤ –∏ –∏—â–µ—Ç —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–π —Ç–µ—Å—Ç–æ–≤—ã–π —Ñ–∞–π–ª –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ tests.

–ù–∞–ø—Ä–∏–º–µ—Ä, –µ—Å–ª–∏ –≤ –ø—Ä–æ–µ–∫—Ç–µ –µ—Å—Ç—å –∫–ª–∞—Å—Å app/Services/UserService.php, —Å–∫—Ä–∏–ø—Ç –ø–æ—Ç—Ä–µ–±—É–µ—Ç —Å–æ–∑–¥–∞—Ç—å —Ñ–∞–π–ª —Ç–µ—Å—Ç–∞ tests/Unit/Services/UserServiceTest.php. –¢–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º, –ª—é–±–æ–π –Ω–æ–≤—ã–π –∏–ª–∏ –∏–∑–º–µ–Ω—ë–Ω–Ω—ã–π –∫–ª–∞—Å—Å –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –¥–æ–ª–∂–µ–Ω –∏–º–µ—Ç—å —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–π —Ç–µ—Å—Ç, —á—Ç–æ –ø–æ–º–æ–≥–∞–µ—Ç –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å –∫–∞—á–µ—Å—Ç–≤–æ –∏ –Ω–∞–¥—ë–∂–Ω–æ—Å—Ç—å –∫–æ–¥–∞.

–≠—Ç–æ —Å–∫—Ä–∏–ø—Ç, –∫–æ—Ç–æ—Ä—ã–π –ø–æ—Å—Ç–æ—è–Ω–Ω–æ –¥–æ–ø–æ–ª–Ω—è–µ—Ç—Å—è, –ø–æ—ç—Ç–æ–º—É –∞–∫—Ç—É–∞–ª—å–Ω—É—é –≤–µ—Ä—Å–∏—é –≤—ã –º–æ–∂–µ—Ç–µ –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å –∑–¥–µ—Å—å - https://github.com/prog-time/git-hooks

### –ü–æ–∏—Å–∫ –Ω–∞–ª–∏—á–∏—è —Ç–µ—Å—Ç–∞ –¥–ª—è –∫–ª–∞—Å—Å–∞
–ù–µ –º–µ–Ω–µ–µ –≤–∞–∂–Ω–æ —Ä–µ–≥—É–ª—è—Ä–Ω–æ –ø—Ä–æ–≤–µ—Ä—è—Ç—å —Ä–∞–±–æ—Ç—É Docker —Å–±–æ—Ä–∫–∏. –î–ª—è —ç—Ç–æ–≥–æ —è —Å–æ–∑–¥–∞—é –æ—Ç–¥–µ–ª—å–Ω—ã–π shell-—Å–∫—Ä–∏–ø—Ç, –∫–æ—Ç–æ—Ä—ã–π –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞–µ—Ç –≤—Å–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –∏ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç, —á—Ç–æ –æ–Ω–∏ —É—Å–ø–µ—à–Ω–æ –∑–∞–ø—É—Å—Ç–∏–ª–∏—Å—å. –¢–∞–∫–æ–π –ø–æ–¥—Ö–æ–¥ –ø–æ–∑–≤–æ–ª—è–µ—Ç —É–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –∏–ª–∏ –∫–æ–¥–µ –Ω–µ –Ω–∞—Ä—É—à–∏–ª–∏ —Ä–∞–±–æ—Ç—É —Å–µ—Ä–≤–∏—Å–æ–≤ –∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –ø–æ–¥–Ω–∏–º–∞–µ—Ç—Å—è –≤ –ª–æ–∫–∞–ª—å–Ω–æ–π —Å—Ä–µ–¥–µ.

–°–∫—Ä–∏–ø—Ç –º–æ–∂–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—Ç—å —Ç–µ–∫—É—â–∏–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã, –∑–∞–Ω–æ–≤–æ —Å–æ–±–∏—Ä–∞—Ç—å –∏—Ö –∏ –∑–∞–ø—É—Å–∫–∞—Ç—å –≤ —Ñ–æ–Ω–µ. –ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è —á–µ—Ä–µ–∑ docker ps –∏–ª–∏ docker compose ps, —á—Ç–æ–±—ã —É–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –≤—Å–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –Ω–∞—Ö–æ–¥—è—Ç—Å—è –≤ —Å—Ç–∞—Ç—É—Å–µ healthy –∏–ª–∏ up.

```bash
#!/bin/bash

echo "=== –û—Å—Ç–∞–Ω–æ–≤–∫–∞ –≤—Å–µ—Ö –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤ ==="
docker-compose down

echo "=== –°–±–æ—Ä–∫–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤ ==="
docker-compose build

echo "=== –ó–∞–ø—É—Å–∫ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤ –≤ —Ñ–æ–Ω–µ ==="
docker-compose up -d

# –ü–∞—É–∑–∞ –¥–ª—è –∑–∞–ø—É—Å–∫–∞ —Å–µ—Ä–≤–∏—Å–æ–≤
echo "=== –ñ–¥–µ–º 5 —Å–µ–∫—É–Ω–¥ –¥–ª—è —Å—Ç–∞—Ä—Ç–∞ —Å–µ—Ä–≤–∏—Å–æ–≤ ==="
sleep 5

echo "=== –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤ ==="
# –ü–æ–ª—É—á–∞–µ–º —Å—Ç–∞—Ç—É—Å –≤—Å–µ—Ö –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤
STATUS=$(docker-compose ps --services --filter "status=running")

if [ -z "$STATUS" ]; then
echo "–û—à–∏–±–∫–∞: –Ω–∏ –æ–¥–∏–Ω –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –Ω–µ –∑–∞–ø—É—â–µ–Ω!"
exit 1
else
echo "–ó–∞–ø—É—â–µ–Ω–Ω—ã–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã:"
docker-compose ps
fi

# –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ –º–æ–∂–Ω–æ –ø—Ä–æ–≤–µ—Ä—è—Ç—å HEALTHCHECK –∫–∞–∂–¥–æ–≥–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
echo "=== –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è HEALTH ==="
docker ps --filter "health=unhealthy" --format "table {{.Names}}\t{{.Status}}"

echo "=== –°–∫—Ä–∏–ø—Ç –∑–∞–≤–µ—Ä—à–µ–Ω ==="

exit 0
```

–¢–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º, –ø–µ—Ä–µ–¥ –¥–µ–ø–ª–æ–µ–º –∏–ª–∏ –≤–∞–∂–Ω—ã–º–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è–º–∏ –º–æ–∂–Ω–æ —É–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ —Å–±–æ—Ä–∫–∞ –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–∞ –∏ –≥–æ—Ç–æ–≤–∞ –∫ —Ä–∞–∑–≤—ë—Ä—Ç—ã–≤–∞–Ω–∏—é.

## –ò—Ç–æ–≥
–ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è –ø—Ä–æ—Ü–µ—Å—Å–∞ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –Ω–∞ Laravel –ø–æ–∑–≤–æ–ª—è–µ—Ç –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ –ø–æ–≤—ã—Å–∏—Ç—å —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –∫–æ–º–∞–Ω–¥—ã –∏ –∫–∞—á–µ—Å—Ç–≤–æ –ø—Ä–æ–µ–∫—Ç–∞. –ö–ª—é—á–µ–≤—ã–µ –º–æ–º–µ–Ω—Ç—ã, –∫–æ—Ç–æ—Ä—ã–µ –¥–µ–ª–∞—é—Ç –ø—Ä–æ—Ü–µ—Å—Å –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω—ã–º:

–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è —á–µ—Ä–µ–∑ Docker Compose ‚Äî –±—ã—Å—Ç—Ä–æ–µ –∏ —Å—Ç–∞–±–∏–ª—å–Ω–æ–µ –ø–æ–¥–Ω—è—Ç–∏–µ –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤ –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏, —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞.

–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å—Ç–∏–ª—è –∫–æ–¥–∞ (Pint) ‚Äî –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –µ–¥–∏–Ω–æ–≥–æ PSR-12 —Å—Ç–∞–Ω–¥–∞—Ä—Ç–∞ –±–µ–∑ —Ä—É—á–Ω–æ–π —Ä–∞–±–æ—Ç—ã.

–°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π –∞–Ω–∞–ª–∏–∑ –∫–æ–¥–∞ (PHPStan + Larastan) ‚Äî –≤—ã—è–≤–ª–µ–Ω–∏–µ –æ—à–∏–±–æ–∫ –∏ –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã—Ö –±–∞–≥–æ–≤ –Ω–∞ —Ä–∞–Ω–Ω–∏—Ö —ç—Ç–∞–ø–∞—Ö —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏.

Git Hooks –∏ shell-—Å–∫—Ä–∏–ø—Ç—ã ‚Äî –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –∏–∑–º–µ–Ω—ë–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤, –∫–æ–Ω—Ç—Ä–æ–ª—å –Ω–∞–ª–∏—á–∏—è —Ç–µ—Å—Ç–æ–≤ –∏ –ø—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã Docker-—Å–±–æ—Ä–∫–∏.

–ü–æ–∫—Ä—ã—Ç–∏–µ —Ç–µ—Å—Ç–∞–º–∏ ‚Äî –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–æ–≤—ã—Ö –∏ –∏–∑–º–µ–Ω—ë–Ω–Ω—ã—Ö –∫–ª–∞—Å—Å–æ–≤ –ø–æ–≤—ã—à–∞–µ—Ç –Ω–∞–¥—ë–∂–Ω–æ—Å—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è.

–°–ª–µ–¥—É—è —ç—Ç–∏–º –ø—Ä–∞–∫—Ç–∏–∫–∞–º, –≤—ã —Å–º–æ–∂–µ—Ç–µ:

—Å–æ–∫—Ä–∞—Ç–∏—Ç—å –≤—Ä–µ–º—è –Ω–∞ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—à–∏–±–æ–∫;

–ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å –µ–¥–∏–Ω—ã–π —Å—Ç–∏–ª—å –∫–æ–¥–∞;

–æ–±–µ—Å–ø–µ—á–∏—Ç—å —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å –∏ –ø—Ä–µ–¥—Å–∫–∞–∑—É–µ–º–æ—Å—Ç—å —Ä–∞–±–æ—Ç—ã –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è;

—É—Å–∫–æ—Ä–∏—Ç—å –≤–Ω–µ–¥—Ä–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π.

–í –∏—Ç–æ–≥–µ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è –ø—Ä–µ–≤—Ä–∞—â–∞–µ—Ç —Ä—É—Ç–∏–Ω–Ω—ã–µ –∑–∞–¥–∞—á–∏ –≤ –ø—Ä–æ–∑—Ä–∞—á–Ω—ã–π –ø—Ä–æ—Ü–µ—Å—Å, –ø–æ–∑–≤–æ–ª—è—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞–º —Å–æ—Å—Ä–µ–¥–æ—Ç–æ—á–∏—Ç—å—Å—è –Ω–∞ —Å–æ–∑–¥–∞–Ω–∏–∏ –ø–æ–ª–µ–∑–Ω–æ–≥–æ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–∞ –∏ —Ä–∞–∑–≤–∏—Ç–∏–∏ –ø—Ä–æ–µ–∫—Ç–∞.